(function(){var t,e,n,i,o,r=function(t,e){return function(){return t.apply(e,arguments)}},s=[].indexOf||function(t){for(var e=0,n=this.length;e<n;e++)if(e in this&&this[e]===t)return e;return-1};e=function(){function t(){}return t.prototype.extend=function(t,e){var n,i;for(n in e)i=e[n],null==t[n]&&(t[n]=i);return t},t.prototype.isMobile=function(t){return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(t)},t.prototype.createEvent=function(t,e,n,i){var o;return null==e&&(e=!1),null==n&&(n=!1),null==i&&(i=null),null!=document.createEvent?(o=document.createEvent("CustomEvent"),o.initCustomEvent(t,e,n,i)):null!=document.createEventObject?(o=document.createEventObject(),o.eventType=t):o.eventName=t,o},t.prototype.emitEvent=function(t,e){return null!=t.dispatchEvent?t.dispatchEvent(e):e in(null!=t)?t[e]():"on"+e in(null!=t)?t["on"+e]():void 0},t.prototype.addEvent=function(t,e,n){return null!=t.addEventListener?t.addEventListener(e,n,!1):null!=t.attachEvent?t.attachEvent("on"+e,n):t[e]=n},t.prototype.removeEvent=function(t,e,n){return null!=t.removeEventListener?t.removeEventListener(e,n,!1):null!=t.detachEvent?t.detachEvent("on"+e,n):delete t[e]},t.prototype.innerHeight=function(){return"innerHeight"in window?window.innerHeight:document.documentElement.clientHeight},t}(),n=this.WeakMap||this.MozWeakMap||(n=function(){function t(){this.keys=[],this.values=[]}return t.prototype.get=function(t){var e,n,i,o;for(o=this.keys,e=n=0,i=o.length;n<i;e=++n)if(o[e]===t)return this.values[e]},t.prototype.set=function(t,e){var n,i,o,r;for(r=this.keys,n=i=0,o=r.length;i<o;n=++i)if(r[n]===t)return void(this.values[n]=e);return this.keys.push(t),this.values.push(e)},t}()),t=this.MutationObserver||this.WebkitMutationObserver||this.MozMutationObserver||(t=function(){function t(){"undefined"!=typeof console&&null!==console&&console.warn("MutationObserver is not supported by your browser."),"undefined"!=typeof console&&null!==console&&console.warn("WOW.js cannot detect dom mutations, please call .sync() after loading new content.")}return t.notSupported=!0,t.prototype.observe=function(){},t}()),i=this.getComputedStyle||function(t,e){return this.getPropertyValue=function(e){var n;return"float"===e&&(e="styleFloat"),o.test(e)&&e.replace(o,function(t,e){return e.toUpperCase()}),(null!=(n=t.currentStyle)?n[e]:void 0)||null},this},o=/(\-([a-z]){1})/g,this.WOW=function(){function o(t){null==t&&(t={}),this.scrollCallback=r(this.scrollCallback,this),this.scrollHandler=r(this.scrollHandler,this),this.resetAnimation=r(this.resetAnimation,this),this.start=r(this.start,this),this.scrolled=!0,this.config=this.util().extend(t,this.defaults),null!=t.scrollContainer&&(this.config.scrollContainer=document.querySelector(t.scrollContainer)),this.animationNameCache=new n,this.wowEvent=this.util().createEvent(this.config.boxClass)}return o.prototype.defaults={boxClass:"wow",animateClass:"animated",offset:0,mobile:!0,live:!0,callback:null,scrollContainer:null},o.prototype.init=function(){var t;return this.element=window.document.documentElement,"interactive"===(t=document.readyState)||"complete"===t?this.start():this.util().addEvent(document,"DOMContentLoaded",this.start),this.finished=[]},o.prototype.start=function(){var e,n,i,o;if(this.stopped=!1,this.boxes=function(){var t,n,i,o;for(i=this.element.querySelectorAll("."+this.config.boxClass),o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(e);return o}.call(this),this.all=function(){var t,n,i,o;for(i=this.boxes,o=[],t=0,n=i.length;t<n;t++)e=i[t],o.push(e);return o}.call(this),this.boxes.length)if(this.disabled())this.resetStyle();else for(o=this.boxes,n=0,i=o.length;n<i;n++)e=o[n],this.applyStyle(e,!0);if(this.disabled()||(this.util().addEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().addEvent(window,"resize",this.scrollHandler),this.interval=setInterval(this.scrollCallback,50)),this.config.live)return new t(function(t){return function(e){var n,i,o,r,s;for(s=[],n=0,i=e.length;n<i;n++)r=e[n],s.push(function(){var t,e,n,i;for(n=r.addedNodes||[],i=[],t=0,e=n.length;t<e;t++)o=n[t],i.push(this.doSync(o));return i}.call(t));return s}}(this)).observe(document.body,{childList:!0,subtree:!0})},o.prototype.stop=function(){if(this.stopped=!0,this.util().removeEvent(this.config.scrollContainer||window,"scroll",this.scrollHandler),this.util().removeEvent(window,"resize",this.scrollHandler),null!=this.interval)return clearInterval(this.interval)},o.prototype.sync=function(e){if(t.notSupported)return this.doSync(this.element)},o.prototype.doSync=function(t){var e,n,i,o,r;if(null==t&&(t=this.element),1===t.nodeType){for(t=t.parentNode||t,o=t.querySelectorAll("."+this.config.boxClass),r=[],n=0,i=o.length;n<i;n++)e=o[n],s.call(this.all,e)<0?(this.boxes.push(e),this.all.push(e),this.stopped||this.disabled()?this.resetStyle():this.applyStyle(e,!0),r.push(this.scrolled=!0)):r.push(void 0);return r}},o.prototype.show=function(t){return this.applyStyle(t),t.className=t.className+" "+this.config.animateClass,null!=this.config.callback&&this.config.callback(t),this.util().emitEvent(t,this.wowEvent),this.util().addEvent(t,"animationend",this.resetAnimation),this.util().addEvent(t,"oanimationend",this.resetAnimation),this.util().addEvent(t,"webkitAnimationEnd",this.resetAnimation),this.util().addEvent(t,"MSAnimationEnd",this.resetAnimation),t},o.prototype.applyStyle=function(t,e){var n,i,o;return i=t.getAttribute("data-wow-duration"),n=t.getAttribute("data-wow-delay"),o=t.getAttribute("data-wow-iteration"),this.animate(function(r){return function(){return r.customStyle(t,e,i,n,o)}}(this))},o.prototype.animate=function(){return"requestAnimationFrame"in window?function(t){return window.requestAnimationFrame(t)}:function(t){return t()}}(),o.prototype.resetStyle=function(){var t,e,n,i,o;for(i=this.boxes,o=[],e=0,n=i.length;e<n;e++)t=i[e],o.push(t.style.visibility="visible");return o},o.prototype.resetAnimation=function(t){var e;if(t.type.toLowerCase().indexOf("animationend")>=0)return e=t.target||t.srcElement,e.className=e.className.replace(this.config.animateClass,"").trim()},o.prototype.customStyle=function(t,e,n,i,o){return e&&this.cacheAnimationName(t),t.style.visibility=e?"hidden":"visible",n&&this.vendorSet(t.style,{animationDuration:n}),i&&this.vendorSet(t.style,{animationDelay:i}),o&&this.vendorSet(t.style,{animationIterationCount:o}),this.vendorSet(t.style,{animationName:e?"none":this.cachedAnimationName(t)}),t},o.prototype.vendors=["moz","webkit"],o.prototype.vendorSet=function(t,e){var n,i,o,r;i=[];for(n in e)o=e[n],t[""+n]=o,i.push(function(){var e,i,s,l;for(s=this.vendors,l=[],e=0,i=s.length;e<i;e++)r=s[e],l.push(t[""+r+n.charAt(0).toUpperCase()+n.substr(1)]=o);return l}.call(this));return i},o.prototype.vendorCSS=function(t,e){var n,o,r,s,l,a;for(l=i(t),s=l.getPropertyCSSValue(e),r=this.vendors,n=0,o=r.length;n<o;n++)a=r[n],s=s||l.getPropertyCSSValue("-"+a+"-"+e);return s},o.prototype.animationName=function(t){var e;try{e=this.vendorCSS(t,"animation-name").cssText}catch(n){e=i(t).getPropertyValue("animation-name")}return"none"===e?"":e},o.prototype.cacheAnimationName=function(t){return this.animationNameCache.set(t,this.animationName(t))},o.prototype.cachedAnimationName=function(t){return this.animationNameCache.get(t)},o.prototype.scrollHandler=function(){return this.scrolled=!0},o.prototype.scrollCallback=function(){var t;if(this.scrolled&&(this.scrolled=!1,this.boxes=function(){var e,n,i,o;for(i=this.boxes,o=[],e=0,n=i.length;e<n;e++)(t=i[e])&&(this.isVisible(t)?this.show(t):o.push(t));return o}.call(this),!this.boxes.length&&!this.config.live))return this.stop()},o.prototype.offsetTop=function(t){for(var e;void 0===t.offsetTop;)t=t.parentNode;for(e=t.offsetTop;t=t.offsetParent;)e+=t.offsetTop;return e},o.prototype.isVisible=function(t){var e,n,i,o,r;return n=t.getAttribute("data-wow-offset")||this.config.offset,r=this.config.scrollContainer&&this.config.scrollContainer.scrollTop||window.pageYOffset,o=r+Math.min(this.element.clientHeight,this.util().innerHeight())-n,i=this.offsetTop(t),e=i+t.clientHeight,i<=o&&e>=r},o.prototype.util=function(){return null!=this._util?this._util:this._util=new e},o.prototype.disabled=function(){return!this.config.mobile&&this.util().isMobile(navigator.userAgent)},o}()}).call(this);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImNvbW1vbi93b3cuanMiXSwibmFtZXMiOlsiTXV0YXRpb25PYnNlcnZlciIsIlV0aWwiLCJXZWFrTWFwIiwiZ2V0Q29tcHV0ZWRTdHlsZSIsImdldENvbXB1dGVkU3R5bGVSWCIsImJpbmQiLCJmbiIsIm1lIiwiYXBwbHkiLCJhcmd1bWVudHMiLCJpbmRleE9mIiwiaXRlbSIsImkiLCJsIiwidGhpcyIsImxlbmd0aCIsInByb3RvdHlwZSIsImV4dGVuZCIsImN1c3RvbSIsImRlZmF1bHRzIiwia2V5IiwidmFsdWUiLCJpc01vYmlsZSIsImFnZW50IiwidGVzdCIsImNyZWF0ZUV2ZW50IiwiZXZlbnQiLCJidWJibGUiLCJjYW5jZWwiLCJkZXRhaWwiLCJjdXN0b21FdmVudCIsImRvY3VtZW50IiwiaW5pdEN1c3RvbUV2ZW50IiwiY3JlYXRlRXZlbnRPYmplY3QiLCJldmVudFR5cGUiLCJldmVudE5hbWUiLCJlbWl0RXZlbnQiLCJlbGVtIiwiZGlzcGF0Y2hFdmVudCIsImFkZEV2ZW50IiwiYWRkRXZlbnRMaXN0ZW5lciIsImF0dGFjaEV2ZW50IiwicmVtb3ZlRXZlbnQiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwiZGV0YWNoRXZlbnQiLCJpbm5lckhlaWdodCIsIndpbmRvdyIsImRvY3VtZW50RWxlbWVudCIsImNsaWVudEhlaWdodCIsIk1veldlYWtNYXAiLCJrZXlzIiwidmFsdWVzIiwiZ2V0IiwiaiIsImxlbiIsInJlZiIsInNldCIsInB1c2giLCJXZWJraXRNdXRhdGlvbk9ic2VydmVyIiwiTW96TXV0YXRpb25PYnNlcnZlciIsImNvbnNvbGUiLCJ3YXJuIiwibm90U3VwcG9ydGVkIiwib2JzZXJ2ZSIsImVsIiwicHNldWRvIiwiZ2V0UHJvcGVydHlWYWx1ZSIsInByb3AiLCJyZXBsYWNlIiwiXyIsIl9jaGFyIiwidG9VcHBlckNhc2UiLCJjdXJyZW50U3R5bGUiLCJXT1ciLCJvcHRpb25zIiwic2Nyb2xsQ2FsbGJhY2siLCJzY3JvbGxIYW5kbGVyIiwicmVzZXRBbmltYXRpb24iLCJzdGFydCIsInNjcm9sbGVkIiwiY29uZmlnIiwidXRpbCIsInNjcm9sbENvbnRhaW5lciIsInF1ZXJ5U2VsZWN0b3IiLCJhbmltYXRpb25OYW1lQ2FjaGUiLCJ3b3dFdmVudCIsImJveENsYXNzIiwiYW5pbWF0ZUNsYXNzIiwib2Zmc2V0IiwibW9iaWxlIiwibGl2ZSIsImNhbGxiYWNrIiwiaW5pdCIsImVsZW1lbnQiLCJyZWFkeVN0YXRlIiwiZmluaXNoZWQiLCJib3giLCJzdG9wcGVkIiwiYm94ZXMiLCJyZXN1bHRzIiwicXVlcnlTZWxlY3RvckFsbCIsImNhbGwiLCJhbGwiLCJkaXNhYmxlZCIsInJlc2V0U3R5bGUiLCJhcHBseVN0eWxlIiwiaW50ZXJ2YWwiLCJzZXRJbnRlcnZhbCIsIl90aGlzIiwicmVjb3JkcyIsImsiLCJsZW4xIiwibm9kZSIsInJlY29yZCIsImxlbjIiLCJyZWYxIiwicmVzdWx0czEiLCJhZGRlZE5vZGVzIiwiZG9TeW5jIiwiYm9keSIsImNoaWxkTGlzdCIsInN1YnRyZWUiLCJzdG9wIiwiY2xlYXJJbnRlcnZhbCIsInN5bmMiLCJub2RlVHlwZSIsInBhcmVudE5vZGUiLCJzaG93IiwiY2xhc3NOYW1lIiwiaGlkZGVuIiwiZGVsYXkiLCJkdXJhdGlvbiIsIml0ZXJhdGlvbiIsImdldEF0dHJpYnV0ZSIsImFuaW1hdGUiLCJjdXN0b21TdHlsZSIsInJlcXVlc3RBbmltYXRpb25GcmFtZSIsInN0eWxlIiwidmlzaWJpbGl0eSIsInRhcmdldCIsInR5cGUiLCJ0b0xvd2VyQ2FzZSIsInNyY0VsZW1lbnQiLCJ0cmltIiwiY2FjaGVBbmltYXRpb25OYW1lIiwidmVuZG9yU2V0IiwiYW5pbWF0aW9uRHVyYXRpb24iLCJhbmltYXRpb25EZWxheSIsImFuaW1hdGlvbkl0ZXJhdGlvbkNvdW50IiwiYW5pbWF0aW9uTmFtZSIsImNhY2hlZEFuaW1hdGlvbk5hbWUiLCJ2ZW5kb3JzIiwicHJvcGVydGllcyIsIm5hbWUiLCJ2ZW5kb3IiLCJjaGFyQXQiLCJzdWJzdHIiLCJ2ZW5kb3JDU1MiLCJwcm9wZXJ0eSIsInJlc3VsdCIsImdldFByb3BlcnR5Q1NTVmFsdWUiLCJjc3NUZXh0IiwiZXJyb3IiLCJpc1Zpc2libGUiLCJvZmZzZXRUb3AiLCJ0b3AiLCJvZmZzZXRQYXJlbnQiLCJib3R0b20iLCJ2aWV3Qm90dG9tIiwidmlld1RvcCIsInNjcm9sbFRvcCIsInBhZ2VZT2Zmc2V0IiwiTWF0aCIsIm1pbiIsIl91dGlsIiwibmF2aWdhdG9yIiwidXNlckFnZW50Il0sIm1hcHBpbmdzIjoiQ0FBQSxXQUNJLEdBQUlBLEdBQWtCQyxFQUFNQyxFQUFTQyxFQUFrQkMsRUFDbkRDLEVBQU8sU0FBU0MsRUFBSUMsR0FBSyxNQUFPLFlBQVksTUFBT0QsR0FBR0UsTUFBTUQsRUFBSUUsYUFDaEVDLEtBQWFBLFNBQVcsU0FBU0MsR0FBUSxJQUFLLEdBQUlDLEdBQUksRUFBR0MsRUFBSUMsS0FBS0MsT0FBUUgsRUFBSUMsRUFBR0QsSUFBTyxHQUFJQSxJQUFLRSxPQUFRQSxLQUFLRixLQUFPRCxFQUFNLE1BQU9DLEVBQUssUUFBUSxFQUVuSlgsR0FBTyxXQUNILFFBQVNBLE1BOEVULE1BNUVBQSxHQUFLZSxVQUFVQyxPQUFTLFNBQVNDLEVBQVFDLEdBQ3JDLEdBQUlDLEdBQUtDLENBQ1QsS0FBS0QsSUFBT0QsR0FDUkUsRUFBUUYsRUFBU0MsR0FDRSxNQUFmRixFQUFPRSxLQUNQRixFQUFPRSxHQUFPQyxFQUd0QixPQUFPSCxJQUdYakIsRUFBS2UsVUFBVU0sU0FBVyxTQUFTQyxHQUMvQixNQUFPLGlFQUFpRUMsS0FBS0QsSUFHakZ0QixFQUFLZSxVQUFVUyxZQUFjLFNBQVNDLEVBQU9DLEVBQVFDLEVBQVFDLEdBQ3pELEdBQUlDLEVBbUJKLE9BbEJjLE9BQVZILElBQ0FBLEdBQVMsR0FFQyxNQUFWQyxJQUNBQSxHQUFTLEdBRUMsTUFBVkMsSUFDQUEsRUFBUyxNQUVlLE1BQXhCRSxTQUFTTixhQUNUSyxFQUFjQyxTQUFTTixZQUFZLGVBQ25DSyxFQUFZRSxnQkFBZ0JOLEVB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QUMzRkgsRUFBYUMsRUFBVUcsS0FBS0MsSUFBSS9KLEtBQUsrRSxRQUFRN0MsYUFBY2xDLEtBQUttRSxPQUFPcEMsZUFBaUIyQyxFQUN4RjZFLEVBQU12SixLQUFLc0osVUFBVXBFLEdBQ3JCdUUsRUFBU0YsRUFBTXJFLEVBQUloRCxhQUNacUgsR0FBT0csR0FBY0QsR0FBVUUsR0FHMUNoRyxFQUFJekQsVUFBVWlFLEtBQU8sV0FDakIsTUFBcUIsT0FBZG5FLEtBQUtnSyxNQUFnQmhLLEtBQUtnSyxNQUFRaEssS0FBS2dLLE1BQVEsR0FBSTdLLElBRzlEd0UsRUFBSXpELFVBQVV1RixTQUFXLFdBQ3JCLE9BQVF6RixLQUFLa0UsT0FBT1MsUUFBVTNFLEtBQUttRSxPQUFPM0QsU0FBU3lKLFVBQVVDLFlBRzFEdkcsT0FJWjRCLEtBQUt2RiIsImZpbGUiOiJjb21tb24vd293LmpzIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uKCkge1xyXG4gICAgdmFyIE11dGF0aW9uT2JzZXJ2ZXIsIFV0aWwsIFdlYWtNYXAsIGdldENvbXB1dGVkU3R5bGUsIGdldENvbXB1dGVkU3R5bGVSWCxcclxuICAgICAgICBiaW5kID0gZnVuY3Rpb24oZm4sIG1lKXsgcmV0dXJuIGZ1bmN0aW9uKCl7IHJldHVybiBmbi5hcHBseShtZSwgYXJndW1lbnRzKTsgfTsgfSxcclxuICAgICAgICBpbmRleE9mID0gW10uaW5kZXhPZiB8fCBmdW5jdGlvbihpdGVtKSB7IGZvciAodmFyIGkgPSAwLCBsID0gdGhpcy5sZW5ndGg7IGkgPCBsOyBpKyspIHsgaWYgKGkgaW4gdGhpcyAmJiB0aGlzW2ldID09PSBpdGVtKSByZXR1cm4gaTsgfSByZXR1cm4gLTE7IH07XHJcblxyXG4gICAgVXRpbCA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICBmdW5jdGlvbiBVdGlsKCkge31cclxuXHJcbiAgICAgICAgVXRpbC5wcm90b3R5cGUuZXh0ZW5kID0gZnVuY3Rpb24oY3VzdG9tLCBkZWZhdWx0cykge1xyXG4gICAgICAgICAgICB2YXIga2V5LCB2YWx1ZTtcclxuICAgICAgICAgICAgZm9yIChrZXkgaW4gZGVmYXVsdHMpIHtcclxuICAgICAgICAgICAgICAgIHZhbHVlID0gZGVmYXVsdHNba2V5XTtcclxuICAgICAgICAgICAgICAgIGlmIChjdXN0b21ba2V5XSA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY3VzdG9tW2tleV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gY3VzdG9tO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFV0aWwucHJvdG90eXBlLmlzTW9iaWxlID0gZnVuY3Rpb24oYWdlbnQpIHtcclxuICAgICAgICAgICAgcmV0dXJuIC9BbmRyb2lkfHdlYk9TfGlQaG9uZXxpUGFkfGlQb2R8QmxhY2tCZXJyeXxJRU1vYmlsZXxPcGVyYSBNaW5pL2kudGVzdChhZ2VudCk7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVXRpbC5wcm90b3R5cGUuY3JlYXRlRXZlbnQgPSBmdW5jdGlvbihldmVudCwgYnViYmxlLCBjYW5jZWwsIGRldGFpbCkge1xyXG4gICAgICAgICAgICB2YXIgY3VzdG9tRXZlbnQ7XHJcbiAgICAgICAgICAgIGlmIChidWJibGUgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgYnViYmxlID0gZmFsc2U7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGNhbmNlbCA9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICBjYW5jZWwgPSBmYWxzZTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGV0YWlsID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGRldGFpbCA9IG51bGw7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnQoJ0N1c3RvbUV2ZW50Jyk7XHJcbiAgICAgICAgICAgICAgICBjdXN0b21FdmVudC5pbml0Q3VzdG9tRXZlbnQoZXZlbnQsIGJ1YmJsZSwgY2FuY2VsLCBkZXRhaWwpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGRvY3VtZW50LmNyZWF0ZUV2ZW50T2JqZWN0ICE9IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUV2ZW50ID0gZG9jdW1lbnQuY3JlYXRlRXZlbnRPYmplY3QoKTtcclxuICAgICAgICAgICAgICAgIGN1c3RvbUV2ZW50LmV2ZW50VHlwZSA9IGV2ZW50O1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgY3VzdG9tRXZlbnQuZXZlbnROYW1lID0gZXZlbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIGN1c3RvbUV2ZW50O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFV0aWwucHJvdG90eXBlLmVtaXRFdmVudCA9IGZ1bmN0aW9uKGVsZW0sIGV2ZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChlbGVtLmRpc3BhdGNoRXZlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uZGlzcGF0Y2hFdmVudChldmVudCk7XHJcbiAgICAgICAgICAgIH0gZWxzZSBpZiAoZXZlbnQgaW4gKGVsZW0gIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSgpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKChcIm9uXCIgKyBldmVudCkgaW4gKGVsZW0gIT0gbnVsbCkpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtW1wib25cIiArIGV2ZW50XSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVXRpbC5wcm90b3R5cGUuYWRkRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0uYWRkRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5hZGRFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0uYXR0YWNoRXZlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uYXR0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBlbGVtW2V2ZW50XSA9IGZuO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgVXRpbC5wcm90b3R5cGUucmVtb3ZlRXZlbnQgPSBmdW5jdGlvbihlbGVtLCBldmVudCwgZm4pIHtcclxuICAgICAgICAgICAgaWYgKGVsZW0ucmVtb3ZlRXZlbnRMaXN0ZW5lciAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZWxlbS5yZW1vdmVFdmVudExpc3RlbmVyKGV2ZW50LCBmbiwgZmFsc2UpO1xyXG4gICAgICAgICAgICB9IGVsc2UgaWYgKGVsZW0uZGV0YWNoRXZlbnQgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGVsZW0uZGV0YWNoRXZlbnQoXCJvblwiICsgZXZlbnQsIGZuKTtcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBkZWxldGUgZWxlbVtldmVudF07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBVdGlsLnByb3RvdHlwZS5pbm5lckhlaWdodCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICBpZiAoJ2lubmVySGVpZ2h0JyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cuaW5uZXJIZWlnaHQ7XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZG9jdW1lbnQuZG9jdW1lbnRFbGVtZW50LmNsaWVudEhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBVdGlsO1xyXG5cclxuICAgIH0pKCk7XHJcblxyXG4gICAgV2Vha01hcCA9IHRoaXMuV2Vha01hcCB8fCB0aGlzLk1veldlYWtNYXAgfHwgKFdlYWtNYXAgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIFdlYWtNYXAoKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMgPSBbXTtcclxuICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzID0gW107XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIFdlYWtNYXAucHJvdG90eXBlLmdldCA9IGZ1bmN0aW9uKGtleSkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGksIGl0ZW0sIGosIGxlbiwgcmVmO1xyXG4gICAgICAgICAgICAgICAgcmVmID0gdGhpcy5rZXlzO1xyXG4gICAgICAgICAgICAgICAgZm9yIChpID0gaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGkgPSArK2opIHtcclxuICAgICAgICAgICAgICAgICAgICBpdGVtID0gcmVmW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmIChpdGVtID09PSBrZXkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzW2ldO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfTtcclxuXHJcbiAgICAgICAgICAgIFdlYWtNYXAucHJvdG90eXBlLnNldCA9IGZ1bmN0aW9uKGtleSwgdmFsdWUpIHtcclxuICAgICAgICAgICAgICAgIHZhciBpLCBpdGVtLCBqLCBsZW4sIHJlZjtcclxuICAgICAgICAgICAgICAgIHJlZiA9IHRoaXMua2V5cztcclxuICAgICAgICAgICAgICAgIGZvciAoaSA9IGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBpID0gKytqKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgaXRlbSA9IHJlZltpXTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoaXRlbSA9PT0ga2V5KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMudmFsdWVzW2ldID0gdmFsdWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB0aGlzLmtleXMucHVzaChrZXkpO1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMudmFsdWVzLnB1c2godmFsdWUpO1xyXG4gICAgICAgICAgICB9O1xyXG5cclxuICAgICAgICAgICAgcmV0dXJuIFdlYWtNYXA7XHJcblxyXG4gICAgICAgIH0pKCkpO1xyXG5cclxuICAgIE11dGF0aW9uT2JzZXJ2ZXIgPSB0aGlzLk11dGF0aW9uT2JzZXJ2ZXIgfHwgdGhpcy5XZWJraXRNdXRhdGlvbk9ic2VydmVyIHx8IHRoaXMuTW96TXV0YXRpb25PYnNlcnZlciB8fCAoTXV0YXRpb25PYnNlcnZlciA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgZnVuY3Rpb24gTXV0YXRpb25PYnNlcnZlcigpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0eXBlb2YgY29uc29sZSAhPT0gXCJ1bmRlZmluZWRcIiAmJiBjb25zb2xlICE9PSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgY29uc29sZS53YXJuKCdNdXRhdGlvbk9ic2VydmVyIGlzIG5vdCBzdXBwb3J0ZWQgYnkgeW91ciBicm93c2VyLicpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgaWYgKHR5cGVvZiBjb25zb2xlICE9PSBcInVuZGVmaW5lZFwiICYmIGNvbnNvbGUgIT09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgICAgICBjb25zb2xlLndhcm4oJ1dPVy5qcyBjYW5ub3QgZGV0ZWN0IGRvbSBtdXRhdGlvbnMsIHBsZWFzZSBjYWxsIC5zeW5jKCkgYWZ0ZXIgbG9hZGluZyBuZXcgY29udGVudC4nKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgTXV0YXRpb25PYnNlcnZlci5ub3RTdXBwb3J0ZWQgPSB0cnVlO1xyXG5cclxuICAgICAgICAgICAgTXV0YXRpb25PYnNlcnZlci5wcm90b3R5cGUub2JzZXJ2ZSA9IGZ1bmN0aW9uKCkge307XHJcblxyXG4gICAgICAgICAgICByZXR1cm4gTXV0YXRpb25PYnNlcnZlcjtcclxuXHJcbiAgICAgICAgfSkoKSk7XHJcblxyXG4gICAgZ2V0Q29tcHV0ZWRTdHlsZSA9IHRoaXMuZ2V0Q29tcHV0ZWRTdHlsZSB8fCBmdW5jdGlvbihlbCwgcHNldWRvKSB7XHJcbiAgICAgICAgICAgIHRoaXMuZ2V0UHJvcGVydHlWYWx1ZSA9IGZ1bmN0aW9uKHByb3ApIHtcclxuICAgICAgICAgICAgICAgIHZhciByZWY7XHJcbiAgICAgICAgICAgICAgICBpZiAocHJvcCA9PT0gJ2Zsb2F0Jykge1xyXG4gICAgICAgICAgICAgICAgICAgIHByb3AgPSAnc3R5bGVGbG9hdCc7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICBpZiAoZ2V0Q29tcHV0ZWRTdHlsZVJYLnRlc3QocHJvcCkpIHtcclxuICAgICAgICAgICAgICAgICAgICBwcm9wLnJlcGxhY2UoZ2V0Q29tcHV0ZWRTdHlsZVJYLCBmdW5jdGlvbihfLCBfY2hhcikge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gX2NoYXIudG9VcHBlckNhc2UoKTtcclxuICAgICAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiAoKHJlZiA9IGVsLmN1cnJlbnRTdHlsZSkgIT0gbnVsbCA/IHJlZltwcm9wXSA6IHZvaWQgMCkgfHwgbnVsbDtcclxuICAgICAgICAgICAgfTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXM7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICBnZXRDb21wdXRlZFN0eWxlUlggPSAvKFxcLShbYS16XSl7MX0pL2c7XHJcblxyXG4gICAgdGhpcy5XT1cgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5kZWZhdWx0cyA9IHtcclxuICAgICAgICAgICAgYm94Q2xhc3M6ICd3b3cnLFxyXG4gICAgICAgICAgICBhbmltYXRlQ2xhc3M6ICdhbmltYXRlZCcsXHJcbiAgICAgICAgICAgIG9mZnNldDogMCxcclxuICAgICAgICAgICAgbW9iaWxlOiB0cnVlLFxyXG4gICAgICAgICAgICBsaXZlOiB0cnVlLFxyXG4gICAgICAgICAgICBjYWxsYmFjazogbnVsbCxcclxuICAgICAgICAgICAgc2Nyb2xsQ29udGFpbmVyOiBudWxsXHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgZnVuY3Rpb24gV09XKG9wdGlvbnMpIHtcclxuICAgICAgICAgICAgaWYgKG9wdGlvbnMgPT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgb3B0aW9ucyA9IHt9O1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMuc2Nyb2xsQ2FsbGJhY2sgPSBiaW5kKHRoaXMuc2Nyb2xsQ2FsbGJhY2ssIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnNjcm9sbEhhbmRsZXIgPSBiaW5kKHRoaXMuc2Nyb2xsSGFuZGxlciwgdGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMucmVzZXRBbmltYXRpb24gPSBiaW5kKHRoaXMucmVzZXRBbmltYXRpb24sIHRoaXMpO1xyXG4gICAgICAgICAgICB0aGlzLnN0YXJ0ID0gYmluZCh0aGlzLnN0YXJ0LCB0aGlzKTtcclxuICAgICAgICAgICAgdGhpcy5zY3JvbGxlZCA9IHRydWU7XHJcbiAgICAgICAgICAgIHRoaXMuY29uZmlnID0gdGhpcy51dGlsKCkuZXh0ZW5kKG9wdGlvbnMsIHRoaXMuZGVmYXVsdHMpO1xyXG4gICAgICAgICAgICBpZiAob3B0aW9ucy5zY3JvbGxDb250YWluZXIgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5jb25maWcuc2Nyb2xsQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihvcHRpb25zLnNjcm9sbENvbnRhaW5lcik7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy5hbmltYXRpb25OYW1lQ2FjaGUgPSBuZXcgV2Vha01hcCgpO1xyXG4gICAgICAgICAgICB0aGlzLndvd0V2ZW50ID0gdGhpcy51dGlsKCkuY3JlYXRlRXZlbnQodGhpcy5jb25maWcuYm94Q2xhc3MpO1xyXG4gICAgICAgIH1cclxuXHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5pbml0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciByZWY7XHJcbiAgICAgICAgICAgIHRoaXMuZWxlbWVudCA9IHdpbmRvdy5kb2N1bWVudC5kb2N1bWVudEVsZW1lbnQ7XHJcbiAgICAgICAgICAgIGlmICgocmVmID0gZG9jdW1lbnQucmVhZHlTdGF0ZSkgPT09IFwiaW50ZXJhY3RpdmVcIiB8fCByZWYgPT09IFwiY29tcGxldGVcIikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zdGFydCgpO1xyXG4gICAgICAgICAgICB9IGVsc2Uge1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoZG9jdW1lbnQsICdET01Db250ZW50TG9hZGVkJywgdGhpcy5zdGFydCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuZmluaXNoZWQgPSBbXTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnN0YXJ0ID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHZhciBib3gsIGosIGxlbiwgcmVmO1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSBmYWxzZTtcclxuICAgICAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0cztcclxuICAgICAgICAgICAgICAgIHJlZiA9IHRoaXMuZWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLlwiICsgdGhpcy5jb25maWcuYm94Q2xhc3MpO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaChib3gpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIH0pLmNhbGwodGhpcyk7XHJcbiAgICAgICAgICAgIHRoaXMuYWxsID0gKGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgcmVmID0gdGhpcy5ib3hlcztcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgICAgIGJveCA9IHJlZltqXTtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYm94KTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgICB9KS5jYWxsKHRoaXMpO1xyXG4gICAgICAgICAgICBpZiAodGhpcy5ib3hlcy5sZW5ndGgpIHtcclxuICAgICAgICAgICAgICAgIGlmICh0aGlzLmRpc2FibGVkKCkpIHtcclxuICAgICAgICAgICAgICAgICAgICB0aGlzLnJlc2V0U3R5bGUoKTtcclxuICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmID0gdGhpcy5ib3hlcztcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgYm94ID0gcmVmW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB0aGlzLmFwcGx5U3R5bGUoYm94LCB0cnVlKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKCF0aGlzLmRpc2FibGVkKCkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudXRpbCgpLmFkZEV2ZW50KHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciB8fCB3aW5kb3csICdzY3JvbGwnLCB0aGlzLnNjcm9sbEhhbmRsZXIpO1xyXG4gICAgICAgICAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcclxuICAgICAgICAgICAgICAgIHRoaXMuaW50ZXJ2YWwgPSBzZXRJbnRlcnZhbCh0aGlzLnNjcm9sbENhbGxiYWNrLCA1MCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKHRoaXMuY29uZmlnLmxpdmUpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBuZXcgTXV0YXRpb25PYnNlcnZlcigoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24ocmVjb3Jkcykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2YXIgaywgbGVuMSwgbm9kZSwgcmVjb3JkLCByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGZvciAoayA9IDAsIGxlbjEgPSByZWNvcmRzLmxlbmd0aDsgayA8IGxlbjE7IGsrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVjb3JkID0gcmVjb3Jkc1trXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgdmFyIGwsIGxlbjIsIHJlZjEsIHJlc3VsdHMxO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJlZjEgPSByZWNvcmQuYWRkZWROb2RlcyB8fCBbXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzMSA9IFtdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIGZvciAobCA9IDAsIGxlbjIgPSByZWYxLmxlbmd0aDsgbCA8IGxlbjI7IGwrKykge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICBub2RlID0gcmVmMVtsXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0czEucHVzaCh0aGlzLmRvU3luYyhub2RlKSk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzMTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIH0pLmNhbGwoX3RoaXMpKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICAgICAgICAgICAgICB9O1xyXG4gICAgICAgICAgICAgICAgfSkodGhpcykpLm9ic2VydmUoZG9jdW1lbnQuYm9keSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGNoaWxkTGlzdDogdHJ1ZSxcclxuICAgICAgICAgICAgICAgICAgICBzdWJ0cmVlOiB0cnVlXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFdPVy5wcm90b3R5cGUuc3RvcCA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLnN0b3BwZWQgPSB0cnVlO1xyXG4gICAgICAgICAgICB0aGlzLnV0aWwoKS5yZW1vdmVFdmVudCh0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIgfHwgd2luZG93LCAnc2Nyb2xsJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcclxuICAgICAgICAgICAgdGhpcy51dGlsKCkucmVtb3ZlRXZlbnQod2luZG93LCAncmVzaXplJywgdGhpcy5zY3JvbGxIYW5kbGVyKTtcclxuICAgICAgICAgICAgaWYgKHRoaXMuaW50ZXJ2YWwgIT0gbnVsbCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIGNsZWFySW50ZXJ2YWwodGhpcy5pbnRlcnZhbCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnN5bmMgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIGlmIChNdXRhdGlvbk9ic2VydmVyLm5vdFN1cHBvcnRlZCkge1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuZG9TeW5jKHRoaXMuZWxlbWVudCk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmRvU3luYyA9IGZ1bmN0aW9uKGVsZW1lbnQpIHtcclxuICAgICAgICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIGlmIChlbGVtZW50ID09IG51bGwpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnQgPSB0aGlzLmVsZW1lbnQ7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGVsZW1lbnQubm9kZVR5cGUgIT09IDEpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybjtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlIHx8IGVsZW1lbnQ7XHJcbiAgICAgICAgICAgIHJlZiA9IGVsZW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5cIiArIHRoaXMuY29uZmlnLmJveENsYXNzKTtcclxuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgIGJveCA9IHJlZltqXTtcclxuICAgICAgICAgICAgICAgIGlmIChpbmRleE9mLmNhbGwodGhpcy5hbGwsIGJveCkgPCAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5ib3hlcy5wdXNoKGJveCk7XHJcbiAgICAgICAgICAgICAgICAgICAgdGhpcy5hbGwucHVzaChib3gpO1xyXG4gICAgICAgICAgICAgICAgICAgIGlmICh0aGlzLnN0b3BwZWQgfHwgdGhpcy5kaXNhYmxlZCgpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMucmVzZXRTdHlsZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuYXBwbHlTdHlsZShib3gsIHRydWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godGhpcy5zY3JvbGxlZCA9IHRydWUpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2godm9pZCAwKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnNob3cgPSBmdW5jdGlvbihib3gpIHtcclxuICAgICAgICAgICAgdGhpcy5hcHBseVN0eWxlKGJveCk7XHJcbiAgICAgICAgICAgIGJveC5jbGFzc05hbWUgPSBib3guY2xhc3NOYW1lICsgXCIgXCIgKyB0aGlzLmNvbmZpZy5hbmltYXRlQ2xhc3M7XHJcbiAgICAgICAgICAgIGlmICh0aGlzLmNvbmZpZy5jYWxsYmFjayAhPSBudWxsKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNvbmZpZy5jYWxsYmFjayhib3gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRoaXMudXRpbCgpLmVtaXRFdmVudChib3gsIHRoaXMud293RXZlbnQpO1xyXG4gICAgICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICdhbmltYXRpb25lbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnb2FuaW1hdGlvbmVuZCcsIHRoaXMucmVzZXRBbmltYXRpb24pO1xyXG4gICAgICAgICAgICB0aGlzLnV0aWwoKS5hZGRFdmVudChib3gsICd3ZWJraXRBbmltYXRpb25FbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgdGhpcy51dGlsKCkuYWRkRXZlbnQoYm94LCAnTVNBbmltYXRpb25FbmQnLCB0aGlzLnJlc2V0QW5pbWF0aW9uKTtcclxuICAgICAgICAgICAgcmV0dXJuIGJveDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmFwcGx5U3R5bGUgPSBmdW5jdGlvbihib3gsIGhpZGRlbikge1xyXG4gICAgICAgICAgICB2YXIgZGVsYXksIGR1cmF0aW9uLCBpdGVyYXRpb247XHJcbiAgICAgICAgICAgIGR1cmF0aW9uID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctZHVyYXRpb24nKTtcclxuICAgICAgICAgICAgZGVsYXkgPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1kZWxheScpO1xyXG4gICAgICAgICAgICBpdGVyYXRpb24gPSBib3guZ2V0QXR0cmlidXRlKCdkYXRhLXdvdy1pdGVyYXRpb24nKTtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0ZSgoZnVuY3Rpb24oX3RoaXMpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gX3RoaXMuY3VzdG9tU3R5bGUoYm94LCBoaWRkZW4sIGR1cmF0aW9uLCBkZWxheSwgaXRlcmF0aW9uKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0pKHRoaXMpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmFuaW1hdGUgPSAoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIGlmICgncmVxdWVzdEFuaW1hdGlvbkZyYW1lJyBpbiB3aW5kb3cpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBmdW5jdGlvbihjYWxsYmFjaykge1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiB3aW5kb3cucmVxdWVzdEFuaW1hdGlvbkZyYW1lKGNhbGxiYWNrKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH0gZWxzZSB7XHJcbiAgICAgICAgICAgICAgICByZXR1cm4gZnVuY3Rpb24oY2FsbGJhY2spIHtcclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gY2FsbGJhY2soKTtcclxuICAgICAgICAgICAgICAgIH07XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9KSgpO1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnJlc2V0U3R5bGUgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGJveCwgaiwgbGVuLCByZWYsIHJlc3VsdHM7XHJcbiAgICAgICAgICAgIHJlZiA9IHRoaXMuYm94ZXM7XHJcbiAgICAgICAgICAgIHJlc3VsdHMgPSBbXTtcclxuICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICBib3ggPSByZWZbal07XHJcbiAgICAgICAgICAgICAgICByZXN1bHRzLnB1c2goYm94LnN0eWxlLnZpc2liaWxpdHkgPSAndmlzaWJsZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFdPVy5wcm90b3R5cGUucmVzZXRBbmltYXRpb24gPSBmdW5jdGlvbihldmVudCkge1xyXG4gICAgICAgICAgICB2YXIgdGFyZ2V0O1xyXG4gICAgICAgICAgICBpZiAoZXZlbnQudHlwZS50b0xvd2VyQ2FzZSgpLmluZGV4T2YoJ2FuaW1hdGlvbmVuZCcpID49IDApIHtcclxuICAgICAgICAgICAgICAgIHRhcmdldCA9IGV2ZW50LnRhcmdldCB8fCBldmVudC5zcmNFbGVtZW50O1xyXG4gICAgICAgICAgICAgICAgcmV0dXJuIHRhcmdldC5jbGFzc05hbWUgPSB0YXJnZXQuY2xhc3NOYW1lLnJlcGxhY2UodGhpcy5jb25maWcuYW5pbWF0ZUNsYXNzLCAnJykudHJpbSgpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5jdXN0b21TdHlsZSA9IGZ1bmN0aW9uKGJveCwgaGlkZGVuLCBkdXJhdGlvbiwgZGVsYXksIGl0ZXJhdGlvbikge1xyXG4gICAgICAgICAgICBpZiAoaGlkZGVuKSB7XHJcbiAgICAgICAgICAgICAgICB0aGlzLmNhY2hlQW5pbWF0aW9uTmFtZShib3gpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGJveC5zdHlsZS52aXNpYmlsaXR5ID0gaGlkZGVuID8gJ2hpZGRlbicgOiAndmlzaWJsZSc7XHJcbiAgICAgICAgICAgIGlmIChkdXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uRHVyYXRpb246IGR1cmF0aW9uXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBpZiAoZGVsYXkpIHtcclxuICAgICAgICAgICAgICAgIHRoaXMudmVuZG9yU2V0KGJveC5zdHlsZSwge1xyXG4gICAgICAgICAgICAgICAgICAgIGFuaW1hdGlvbkRlbGF5OiBkZWxheVxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYgKGl0ZXJhdGlvbikge1xyXG4gICAgICAgICAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XHJcbiAgICAgICAgICAgICAgICAgICAgYW5pbWF0aW9uSXRlcmF0aW9uQ291bnQ6IGl0ZXJhdGlvblxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgdGhpcy52ZW5kb3JTZXQoYm94LnN0eWxlLCB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25OYW1lOiBoaWRkZW4gPyAnbm9uZScgOiB0aGlzLmNhY2hlZEFuaW1hdGlvbk5hbWUoYm94KVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgcmV0dXJuIGJveDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnZlbmRvcnMgPSBbXCJtb3pcIiwgXCJ3ZWJraXRcIl07XHJcblxyXG4gICAgICAgIFdPVy5wcm90b3R5cGUudmVuZG9yU2V0ID0gZnVuY3Rpb24oZWxlbSwgcHJvcGVydGllcykge1xyXG4gICAgICAgICAgICB2YXIgbmFtZSwgcmVzdWx0cywgdmFsdWUsIHZlbmRvcjtcclxuICAgICAgICAgICAgcmVzdWx0cyA9IFtdO1xyXG4gICAgICAgICAgICBmb3IgKG5hbWUgaW4gcHJvcGVydGllcykge1xyXG4gICAgICAgICAgICAgICAgdmFsdWUgPSBwcm9wZXJ0aWVzW25hbWVdO1xyXG4gICAgICAgICAgICAgICAgZWxlbVtcIlwiICsgbmFtZV0gPSB2YWx1ZTtcclxuICAgICAgICAgICAgICAgIHJlc3VsdHMucHVzaCgoZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgdmFyIGosIGxlbiwgcmVmLCByZXN1bHRzMTtcclxuICAgICAgICAgICAgICAgICAgICByZWYgPSB0aGlzLnZlbmRvcnM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVzdWx0czEgPSBbXTtcclxuICAgICAgICAgICAgICAgICAgICBmb3IgKGogPSAwLCBsZW4gPSByZWYubGVuZ3RoOyBqIDwgbGVuOyBqKyspIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmVuZG9yID0gcmVmW2pdO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICByZXN1bHRzMS5wdXNoKGVsZW1bXCJcIiArIHZlbmRvciArIChuYW1lLmNoYXJBdCgwKS50b1VwcGVyQ2FzZSgpKSArIChuYW1lLnN1YnN0cigxKSldID0gdmFsdWUpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICByZXR1cm4gcmVzdWx0czE7XHJcbiAgICAgICAgICAgICAgICB9KS5jYWxsKHRoaXMpKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0cztcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnZlbmRvckNTUyA9IGZ1bmN0aW9uKGVsZW0sIHByb3BlcnR5KSB7XHJcbiAgICAgICAgICAgIHZhciBqLCBsZW4sIHJlZiwgcmVzdWx0LCBzdHlsZSwgdmVuZG9yO1xyXG4gICAgICAgICAgICBzdHlsZSA9IGdldENvbXB1dGVkU3R5bGUoZWxlbSk7XHJcbiAgICAgICAgICAgIHJlc3VsdCA9IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUocHJvcGVydHkpO1xyXG4gICAgICAgICAgICByZWYgPSB0aGlzLnZlbmRvcnM7XHJcbiAgICAgICAgICAgIGZvciAoaiA9IDAsIGxlbiA9IHJlZi5sZW5ndGg7IGogPCBsZW47IGorKykge1xyXG4gICAgICAgICAgICAgICAgdmVuZG9yID0gcmVmW2pdO1xyXG4gICAgICAgICAgICAgICAgcmVzdWx0ID0gcmVzdWx0IHx8IHN0eWxlLmdldFByb3BlcnR5Q1NTVmFsdWUoXCItXCIgKyB2ZW5kb3IgKyBcIi1cIiArIHByb3BlcnR5KTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICByZXR1cm4gcmVzdWx0O1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFdPVy5wcm90b3R5cGUuYW5pbWF0aW9uTmFtZSA9IGZ1bmN0aW9uKGJveCkge1xyXG4gICAgICAgICAgICB2YXIgYW5pbWF0aW9uTmFtZSwgZXJyb3I7XHJcbiAgICAgICAgICAgIHRyeSB7XHJcbiAgICAgICAgICAgICAgICBhbmltYXRpb25OYW1lID0gdGhpcy52ZW5kb3JDU1MoYm94LCAnYW5pbWF0aW9uLW5hbWUnKS5jc3NUZXh0O1xyXG4gICAgICAgICAgICB9IGNhdGNoIChlcnJvcikge1xyXG4gICAgICAgICAgICAgICAgYW5pbWF0aW9uTmFtZSA9IGdldENvbXB1dGVkU3R5bGUoYm94KS5nZXRQcm9wZXJ0eVZhbHVlKCdhbmltYXRpb24tbmFtZScpO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIGlmIChhbmltYXRpb25OYW1lID09PSAnbm9uZScpIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiAnJztcclxuICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgIHJldHVybiBhbmltYXRpb25OYW1lO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5jYWNoZUFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLnNldChib3gsIHRoaXMuYW5pbWF0aW9uTmFtZShib3gpKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmNhY2hlZEFuaW1hdGlvbk5hbWUgPSBmdW5jdGlvbihib3gpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuYW5pbWF0aW9uTmFtZUNhY2hlLmdldChib3gpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIFdPVy5wcm90b3R5cGUuc2Nyb2xsSGFuZGxlciA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICByZXR1cm4gdGhpcy5zY3JvbGxlZCA9IHRydWU7XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5zY3JvbGxDYWxsYmFjayA9IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB2YXIgYm94O1xyXG4gICAgICAgICAgICBpZiAodGhpcy5zY3JvbGxlZCkge1xyXG4gICAgICAgICAgICAgICAgdGhpcy5zY3JvbGxlZCA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgdGhpcy5ib3hlcyA9IChmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaiwgbGVuLCByZWYsIHJlc3VsdHM7XHJcbiAgICAgICAgICAgICAgICAgICAgcmVmID0gdGhpcy5ib3hlcztcclxuICAgICAgICAgICAgICAgICAgICByZXN1bHRzID0gW107XHJcbiAgICAgICAgICAgICAgICAgICAgZm9yIChqID0gMCwgbGVuID0gcmVmLmxlbmd0aDsgaiA8IGxlbjsgaisrKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIGJveCA9IHJlZltqXTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKCEoYm94KSkge1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgaWYgKHRoaXMuaXNWaXNpYmxlKGJveCkpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgICAgIHRoaXMuc2hvdyhib3gpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAgICAgY29udGludWU7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgICAgICAgICAgcmVzdWx0cy5wdXNoKGJveCk7XHJcbiAgICAgICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiByZXN1bHRzO1xyXG4gICAgICAgICAgICAgICAgfSkuY2FsbCh0aGlzKTtcclxuICAgICAgICAgICAgICAgIGlmICghKHRoaXMuYm94ZXMubGVuZ3RoIHx8IHRoaXMuY29uZmlnLmxpdmUpKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgcmV0dXJuIHRoaXMuc3RvcCgpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgfTtcclxuXHJcbiAgICAgICAgV09XLnByb3RvdHlwZS5vZmZzZXRUb3AgPSBmdW5jdGlvbihlbGVtZW50KSB7XHJcbiAgICAgICAgICAgIHZhciB0b3A7XHJcbiAgICAgICAgICAgIHdoaWxlIChlbGVtZW50Lm9mZnNldFRvcCA9PT0gdm9pZCAwKSB7XHJcbiAgICAgICAgICAgICAgICBlbGVtZW50ID0gZWxlbWVudC5wYXJlbnROb2RlO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIHRvcCA9IGVsZW1lbnQub2Zmc2V0VG9wO1xyXG4gICAgICAgICAgICB3aGlsZSAoZWxlbWVudCA9IGVsZW1lbnQub2Zmc2V0UGFyZW50KSB7XHJcbiAgICAgICAgICAgICAgICB0b3AgKz0gZWxlbWVudC5vZmZzZXRUb3A7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgcmV0dXJuIHRvcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmlzVmlzaWJsZSA9IGZ1bmN0aW9uKGJveCkge1xyXG4gICAgICAgICAgICB2YXIgYm90dG9tLCBvZmZzZXQsIHRvcCwgdmlld0JvdHRvbSwgdmlld1RvcDtcclxuICAgICAgICAgICAgb2Zmc2V0ID0gYm94LmdldEF0dHJpYnV0ZSgnZGF0YS13b3ctb2Zmc2V0JykgfHwgdGhpcy5jb25maWcub2Zmc2V0O1xyXG4gICAgICAgICAgICB2aWV3VG9wID0gKHRoaXMuY29uZmlnLnNjcm9sbENvbnRhaW5lciAmJiB0aGlzLmNvbmZpZy5zY3JvbGxDb250YWluZXIuc2Nyb2xsVG9wKSB8fCB3aW5kb3cucGFnZVlPZmZzZXQ7XHJcbiAgICAgICAgICAgIHZpZXdCb3R0b20gPSB2aWV3VG9wICsgTWF0aC5taW4odGhpcy5lbGVtZW50LmNsaWVudEhlaWdodCwgdGhpcy51dGlsKCkuaW5uZXJIZWlnaHQoKSkgLSBvZmZzZXQ7XHJcbiAgICAgICAgICAgIHRvcCA9IHRoaXMub2Zmc2V0VG9wKGJveCk7XHJcbiAgICAgICAgICAgIGJvdHRvbSA9IHRvcCArIGJveC5jbGllbnRIZWlnaHQ7XHJcbiAgICAgICAgICAgIHJldHVybiB0b3AgPD0gdmlld0JvdHRvbSAmJiBib3R0b20gPj0gdmlld1RvcDtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLnV0aWwgPSBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgcmV0dXJuIHRoaXMuX3V0aWwgIT0gbnVsbCA/IHRoaXMuX3V0aWwgOiB0aGlzLl91dGlsID0gbmV3IFV0aWwoKTtcclxuICAgICAgICB9O1xyXG5cclxuICAgICAgICBXT1cucHJvdG90eXBlLmRpc2FibGVkID0gZnVuY3Rpb24oKSB7XHJcbiAgICAgICAgICAgIHJldHVybiAhdGhpcy5jb25maWcubW9iaWxlICYmIHRoaXMudXRpbCgpLmlzTW9iaWxlKG5hdmlnYXRvci51c2VyQWdlbnQpO1xyXG4gICAgICAgIH07XHJcblxyXG4gICAgICAgIHJldHVybiBXT1c7XHJcblxyXG4gICAgfSkoKTtcclxuXHJcbn0pLmNhbGwodGhpcyk7XHJcbiJdfQ==
